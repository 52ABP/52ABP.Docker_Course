# 镜像加速站点
阿里云： https://yq.aliyun.com/articles/110806?spm=a2c1q.8351553.0.0.7333a92cpFNsQE
```
# step 1: 安装必要的一些系统工具
sudo apt-get update
sudo apt-get -y install apt-transport-https ca-certificates curl software-properties-common
# step 2: 安装GPG证书
curl -fsSL http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add -
# Step 3: 写入软件源信息
sudo add-apt-repository "deb [arch=amd64] http://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable"
# Step 4: 更新并安装 Docker-CE
sudo apt-get -y update
sudo apt-get -y install docker-ce

# 安装指定版本的Docker-CE:
# Step 1: 查找Docker-CE的版本:
# apt-cache madison docker-ce
#   docker-ce | 17.03.1~ce-0~ubuntu-xenial | http://mirrors.aliyun.com/docker-ce/linux/ubuntu xenial/stable amd64 Packages
#   docker-ce | 17.03.0~ce-0~ubuntu-xenial | http://mirrors.aliyun.com/docker-ce/linux/ubuntu xenial/stable amd64 Packages
# Step 2: 安装指定版本的Docker-CE: (VERSION 例如上面的 17.03.1~ce-0~ubuntu-xenial)
# sudo apt-get -y install docker-ce=[VERSION]
```


#WordPress PHP下，全世界流行的博客站点

```
docker run --name ltm_db --env MYSQL_ROOT_PASSWORD=123 -d mariadb

docker run --name ltm_blog --link ltm_db:mysql -p 8080:80 -d wordpress

```


# 搭建GitLab服务

docker-gitlab 基于sameersbn/docker-gitlab  
项目地址：https://github.com/sameersbn/docker-gitlab

必备环境：
- postgresql
- redis 
- gitlab

启动 postgresql
```
 docker run --name gitlab-postgresql -d \
    --env 'DB_NAME=gitlabhq_production' \
    --env 'DB_USER=gitlab' --env 'DB_PASS=password' \
    --env 'DB_EXTENSION=pg_trgm' \
    --volume /srv/docker/gitlab/postgresql:/var/lib/postgresql \
    sameersbn/postgresql:9.6-2
  
```
启动 redis
```
docker run --name gitlab-redis -d sameersbn/redis:latest
```
启动gitlab
```
docker run --name gitlab -d \
    --link gitlab-postgresql:postgresql --link gitlab-redis:redisio \
    -p 10022:22 -p 10080:80 \
    --env 'GITLAB_PORT=10080' --env 'GITLAB_SSH_PORT=10022' \
    --env 'GITLAB_SECRETS_DB_KEY_BASE=long-and-random-alpha-numeric-string' \
    --env 'GITLAB_SECRETS_SECRET_KEY_BASE=long-and-random-alpha-numeric-string' \
    --env 'GITLAB_SECRETS_OTP_KEY_BASE=long-and-random-alpha-numeric-string' \
    --volume /srv/docker/gitlab/gitlab:/home/git/data \
    sameersbn/gitlab:10.3.2
```

## 项目管理软件
 redmine
```
 docker run --name=postgresql-redmine -d \
  --env='DB_NAME=redmine_production' \
  --env='DB_USER=redmine' --env='DB_PASS=password' \
  --volume=/srv/docker/redmine/postgresql:/var/lib/postgresql \
  sameersbn/postgresql:9.6-2
```

```
docker run --name=redmine -d \
  --link=postgresql-redmine:postgresql -p=10083:80 \
  --env='REDMINE_PORT=10083' \
  --volume=/srv/docker/redmine/redmine:/home/redmine/data \
  sameersbn/redmine:3.4.2
```


# 常用命令
```
查看所有容器
docker ps -as 
查看运行中的容器
docker ps -as 

停止所有的容器
docker stop $(docker ps -a -q)
强制结束（杀进程）
docker kill $(docker ps -a -q)
删除所有的容器
docker rm $(docker ps -a -q)



删除所有的镜像
docker rmi $(docker images -q)



```

